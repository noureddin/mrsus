# صيغة مرصوص للنصوص المتوازية

كل ملف هو ملف نصي فيه بيانات وصفية عن الكتاب الأصل وعن ترجماته، وفيه نص الكتاب الأصل مقسمًّا إلى «وحدات»، وكل «وحدة» من الأصل متبوعة بترجماتها.

في مرصوص، الكتاب الأصل دائما كتاب عربي. ويمكن لإحدى «الترجمات» أن تكون عربية كذلك (مثلا شرح أو تفسير مختصر).

يسمح للكتاب الواحد بأي عدد من الترجمات: واحد، أو عشرة، أو حتى صفر (لمن شاء أن يبحث في استعمالات العرب لتعابير أو تراكيب معينة مثلا، فلا تهم الترجمة وقتئذٍ).

في أي موضع من هذا الملف، ابدأ سطرًا بأربعة فواصل منقوطة غربية (`;;;;`) لتركه وكأنه غير موجود.

(إن أردت فعلًا بدأ سطر حقيقي بها، فأسبقها بالشرطة المائلة العكسية (`\`) أو بمسافة.)

وكذلك لا تستطيع بدء سطر حقيقي (أيْ في المحتوى) بعلامة فتح القوس الحاد `<` (علامة «أصغر من»؛ لاحظ أنها تظهر معكوسة في النص العربي)، ولو أسبقته بمسافات. لكن إن احتجته في أول سطر فأسبقه بالشرطة المائلة العكسية (`\`). فالقوس الحاد في أول السطر محجوز لبدء وحدات الأصل أو الترجمة.

ومثله علامة فتح القوس المجعد `{` في المحتوى، إلا أن يكون آخر فقرة في وحدة ليميّز رابطها، فإن كان نصًّا فأسبقه بشرطة مائلة عكسية.

## البيانات الوصفية

تقع في أول الملف قبل الوحدة الأولى من المحتوى. وتُكتب بطريقة محددة صارمة تشبه INI أو TOML. وتبيّن صفات الأصل وصفات كل ترجمة.

يمكن استعمال اسم الصفة العربي أو الإنجليزي؛ المقترح استعمال الاسم العربي للأصل والإنجليزي للترجمات.

للأصل العربي، صفة واحدة هي المطلوب:

- `العنوان` (أو `title`): عنوان الكتاب (بالعربية).

صفات أخرى يستحسن وجودها لكنها غير مفروضة:

- `المؤلف` (أو `author`): اسم المؤلف (بالعربية).
- `السنة` (أو `year`): السنة الميلادية لتصنيف الكتاب أو إتمامه.
- `المصدر` (أو `source`): جملة أو عبارة أو رابط إنترنت لمصدر محتوى الكتاب.
- `الوصف` (أو `description`): فقرة تصف محتوى الكتاب.

**لاحظ:** المصدر `source` عن مصدر النص الحاسوبيّ، والوصف `description` عن الكتاب عموما. يظهر كلاهما للمستخدمين في التطبيق/الموقع، فالأفضل أن يكونا بالعربية، أو على الأقل الوصف.

جميع ما يُذكر في هذه الصفات يُعدّ نصًّا مجردًا. باستثناء صفتين تسمحان بشيء من التنسيق المحدود:

`الوصف` (`description`):
- استعمل `<<>>` لكسر السطر (أيْ فتح سطر جديد).

`المصدر` (أو `source`):
- استعمل `<<>>` لكسر السطر (أيْ فتح سطر جديد).
- أحط الروابط المجردة بقوسين مجعدين لتفعيلها (`{`و`}`، مثل `{https://www.noureddin.dev}`).
- للروابط ذات عنوان بديل، استعمل الصيغة `{{Example Website||https:://example.com}}`، أي قوسين مجعدين مزدوجين بينهم العنوان البديل ثم علامتي أنبوب ثم الرابط.

لوصف كل ترجمة،  اكتب `[مفتاح]` في سطر وحده، حيث «مفتاح» هو معرّف مميز (ID) لكل ترجمة في هذا الملف. يجب ألا تخرج حروف المفتاح عن الحروف الإنجليزية الصغيرة أو الأرقام المغربية [0-9] أو الشرطة السفلية. لا مسافة، ولا محرف يونيكود، ولا محرف أسكي غير المذكور. ولا يرى مستخدم هذه المفاتيح، إلا لو لم تعرّف للترجمة عنوانًا أو اسم مؤلف.

جميع صفات الترجمة اختيارية، لكن يجب تعريف كل ترجمة بسطر المفتاح. صفات الترجمة الممكنة هي:

- `اللغة` (أو `language`): هي رمز اللغة في [معيار ISO الثنائي الحروف](https://ar.wikipedia.org/wiki/قائمة_رموز_أيزو_639-1) (مثل `en` للإنجليزية أو `fr` للفرنسية)، أو [بالمعيار «الودي» العربي الثلاثي الحروف](https://gist.github.com/noureddin/49f75324427447e2da89b17173ebd32d) للغات (مثل `انج` للإنجليزية، `فنس` للفرنسية). تُعدّ الإنجليزية إن تُركت.

<!-- - `الاتجاه` (أو `direction`): هو اتجاه نص الكتابة للغة، ويكون `rtl` أو `يمين` للغات مثل العربية والفارسية والأردية، و`ltr` أو `يسار` للغات مثل الإنجليزية والألمانية والروسية. يُحدد الاتجاه من اللغة غالبا، لكن بعض اللغات تُكتب بالاتجاهين (مثل الماليزية)، فنحتاج عندئذ تحديده. يُعدّ `ltr`/`يسار` إن لم يُذكر.-->

- `العنوان` (أو `title`): عنوان كتاب الترجمة.
- `المؤلف` (أو `author`): اسم المترجم (بالحروف الإنجليزية أو بحروف لغته الأصلية).
- `السنة` (أو `year`): السنة الميلادية للترجمة أو إتمامها.
- `المصدر` (أو `source`): جملة أو عبارة أو رابط إنترنت لمصدر محتوى الترجمة.
- `الوصف` (أو `description`): فقرة تصف الترجمة.

اجعل معرّفات الترجمات قصيرة ومتمايزة للمحرر، فإنها تظهر في وصف الترجمات في أول الملف، ثم تقدِّم كل ترجمة طوال الكتاب.

مثال:

```
العنوان: القرآن الكريم

[p]
author: Marmaduke William Muhammad Pickthall
year: 1930

[y]
author: Abdullah Yusuf Ali
year: 1934

[sr]
author: Muhammad Sarwar
year: 1981

[sah]
title: Saheeh International
year: 1997
```

## المحتوى

يقسم الكتاب الأصل إلى وحدات دنيا (units)، مثل الفقرات. وتكتب كل وحدة من الأصل متبوعة بترجماتها.

لا يشترط ترتيب معين لترجمات أي وحدة. وإن كان الأفضل للمحررين اتباع ترتيب تعريفها في الوصف في أول الملف.

تُقدّم كل وحدة ترجمة بسطر ليس فيها إلا مفتاح الترجمة بين قوسين حادين (`<`و`>`). ويمكن أن يسبق هذا السطر أو أن يُتلى بسطر فارغ لتمييزه للمحريين.

تُقدّم الوحدة الأصل بسطر يبدأ بـ`<>`، واختياريًّا يُتبع بعنوان، إذا كان يبدأ «قسمًا» جديدًا في الكتاب (باب أو فصل أو نحوهما).

يبدأ العنوان بمحرفي النقطتين (`::`) ثم مسافة، ثم العنوان. وإذا كان العنوان ذا أقسام (مثلا فصل في باب)، يُستحسن ذكر جميع أجزائه مفصولة بمحرفي النقطتين بين مسافتين (` :: `).

في رسائل الأخطاء عند تحليل المحتوى، تسمى الوحدة الأصل وترجماتها «صفًّا» (row).

قد تضم الوحدة أزيد من فقرة واحدة؛ تُفصل الفقرات بسطر فارغ. إذا كانت الفقرة الأخيرة محاطة بقوسين مجعدين، فإنها تُجعل رابطًا ويوضع بعد عنوان الترجمة.

قد تحاط الفقرة الأخيرة (قبل فقرة الرابط إن وُجدت) بقوسين مربعين؛ عندئذٍ تُعدّ هذه الفقرة تعقيبًا هامشيًّا وتظهر بلون خفيف، وهذا المستعمل في الأحاديث النبوية للإخبار بدرجة الحديث («[حديث صحيح]» مثلا).

مثال:

```
<>:: سورة الفاتحة :: آية ٢
ٱلۡحَمۡدُ لِلَّهِ رَبِّ ٱلۡعَـٰلَمِینَ 

<p>
Praise be to Allah, Lord of the Worlds,

<y>
Praise be to Allah, the Cherisher and Sustainer of the worlds;

<sr>
All praise belongs to God, Lord of the Universe,

<sah>
[All] praise is [due] to Allah, Lord of the worlds -

<>:: سورة الفاتحة :: آية ٣
ٱلرَّحۡمَـٰنِ ٱلرَّحِیمِ
```

